
enable_dual_stack_networks: true
kube_network_plugin: cilium
# Nodelocaldns is deployed separately
enable_nodelocaldns: false
# Cilium Settings
# Ref. https://github.com/kubernetes-sigs/kubespray/blob/master/roles/network_plugin/cilium/defaults/main.yml
cilium_version: v1.16.5
cilium_enable_ipv6: true

cilium_kube_proxy_replacement: strict
cilium_enable_host_legacy_routing: false
cilium_enable_bpf_masquerade: true
cilium_l2announcements: true
cilium_enable_portmap: true

cilium_loadbalancer_ip_pools:
  - name: "node-net-pool"
    cidrs:
      - "192.168.1.240/28" # 240 â€“ 255
cilium_config_extra_vars:
  enable-local-redirect-policy: true
cilium_enable_hubble: true
cilium_hubble_install: true
cilium_hubble_tls_generate: true
cilium_enable_hubble_metrics: true
cilium_hubble_metrics:
  - dns
  - drop
  - tcp
  - flow
  - icmp
  - http

kubectl_localhost: true
kubeconfig_localhost: true
